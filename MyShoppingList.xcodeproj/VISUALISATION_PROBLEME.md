# ğŸ¨ Visualisation du ProblÃ¨me CloudKit Sharing

## ğŸ”´ CE QUI SE PASSE ACTUELLEMENT (ERREUR)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Votre iPhone (TestFlight)                â”‚
â”‚                                                             â”‚
â”‚  ğŸ“± App MyShoppingList                                      â”‚
â”‚  â”œâ”€ Pommes                                                  â”‚
â”‚  â”œâ”€ Bananes                                                 â”‚
â”‚  â””â”€ Oranges                                                 â”‚
â”‚                                                             â”‚
â”‚  [Appui sur le bouton ğŸ‘¤+]                                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Partage CloudKit                    â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                  â”‚
â”‚  â”‚  â”‚ Ma Liste de Courses            â”‚  â”‚                  â”‚
â”‚  â”‚  â”‚ 3 articles                      â”‚  â”‚                  â”‚
â”‚  â”‚  â”‚                                 â”‚  â”‚                  â”‚
â”‚  â”‚  â”‚ [Partager le lien...]           â”‚  â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                       â”‚                                     â”‚
â”‚                       â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Messages (iMessage)                 â”‚                  â”‚
â”‚  â”‚                                       â”‚                  â”‚
â”‚  â”‚  Ã€: Contact                           â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                  â”‚
â”‚  â”‚  â”‚ [Tentative crÃ©ation du lien...] â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚                                 â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚  âŒ Couldn't Add People          â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚  A link couldn't be created    â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚  for you to share.              â”‚ â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Que se passe-t-il?
                      â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CloudKit (Apple Serveurs)                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Development   â”‚         â”‚   Production   â”‚             â”‚
â”‚  â”‚  Environment   â”‚         â”‚  Environment   â”‚             â”‚
â”‚  â”‚                â”‚         â”‚                â”‚             â”‚
â”‚  â”‚  âœ… Schema OK  â”‚         â”‚  âŒ VIDE       â”‚             â”‚
â”‚  â”‚  âœ… Records OK â”‚         â”‚  âŒ Pas de     â”‚             â”‚
â”‚  â”‚                â”‚         â”‚     schema     â”‚             â”‚
â”‚  â”‚                â”‚         â”‚                â”‚             â”‚
â”‚  â”‚  (Xcode Debug) â”‚         â”‚  (TestFlight)  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                     â–²                       â”‚
â”‚                                     â”‚                       â”‚
â”‚                         TestFlight cherche ICI             â”‚
â”‚                         mais ne trouve RIEN! âŒ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ProblÃ¨me**: TestFlight utilise l'environnement **Production**, mais votre schÃ©ma n'y est pas dÃ©ployÃ©!

---

## âœ… CE QUI DEVRAIT SE PASSER (APRÃˆS LE FIX)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Dashboard CloudKit                           â”‚
â”‚                https://icloud.developer.apple.com/          â”‚
â”‚                                                             â”‚
â”‚  Container: iCloud.com.MyShoppingList                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚    Schema      â”‚                                         â”‚
â”‚  â”‚                â”‚                                         â”‚
â”‚  â”‚  Development   â”‚â”€â”€â”                                      â”‚
â”‚  â”‚  â”œâ”€ CD_GroceryItemEntity                                â”‚
â”‚  â”‚  â”œâ”€ CD_ShoppingListEntity                               â”‚
â”‚  â”‚  â””â”€ cloudkit.share                                      â”‚
â”‚  â”‚                â”‚  â”‚                                      â”‚
â”‚  â”‚  [Deploy to    â”‚  â”‚ DÃ‰PLOIEMENT                         â”‚
â”‚  â”‚   Production...] â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â–º                        â”‚
â”‚  â”‚                â”‚  â”‚                                      â”‚
â”‚  â”‚  Production    â”‚â—„â”€â”˜                                      â”‚
â”‚  â”‚  â”œâ”€ CD_GroceryItemEntity  âœ…                             â”‚
â”‚  â”‚  â”œâ”€ CD_ShoppingListEntity âœ…                             â”‚
â”‚  â”‚  â””â”€ cloudkit.share        âœ…                             â”‚
â”‚  â”‚                â”‚                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Maintenant TestFlight peut accÃ©der
                      â”‚ au schema en Production!
                      â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Votre iPhone (TestFlight)                â”‚
â”‚                                                             â”‚
â”‚  ğŸ“± App MyShoppingList                                      â”‚
â”‚  â”œâ”€ Pommes                                                  â”‚
â”‚  â”œâ”€ Bananes                                                 â”‚
â”‚  â””â”€ Oranges                                                 â”‚
â”‚                                                             â”‚
â”‚  [Appui sur le bouton ğŸ‘¤+]                                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Partage CloudKit                    â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                  â”‚
â”‚  â”‚  â”‚ Ma Liste de Courses            â”‚  â”‚                  â”‚
â”‚  â”‚  â”‚ 3 articles                      â”‚  â”‚                  â”‚
â”‚  â”‚  â”‚                                 â”‚  â”‚                  â”‚
â”‚  â”‚  â”‚ [Partager le lien...]           â”‚  â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                       â”‚                                     â”‚
â”‚                       â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Messages (iMessage)                 â”‚                  â”‚
â”‚  â”‚                                       â”‚                  â”‚
â”‚  â”‚  Ã€: Contact                           â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                  â”‚
â”‚  â”‚  â”‚ ğŸ”µ Ma Liste de Courses          â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚ https://www.icloud.com/share... â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚                                 â”‚ â”‚                  â”‚
â”‚  â”‚  â”‚ âœ… LIEN CRÃ‰Ã‰ AVEC SUCCÃˆS!       â”‚ â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                  â”‚
â”‚  â”‚                                       â”‚                  â”‚
â”‚  â”‚  [Envoyer â–¶]                          â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Solution**: AprÃ¨s le dÃ©ploiement, TestFlight trouve le schÃ©ma en Production et peut crÃ©er le lien! âœ…

---

## ğŸ”„ FLUX COMPLET DU PARTAGE

### Phase 1: CrÃ©ation du partage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur A â”‚
â”‚   (iPhone)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1. Appuie sur ğŸ‘¤+
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PersistenceController       â”‚
â”‚                             â”‚
â”‚ func createShare() {        â”‚
â”‚   â”œâ”€ RÃ©cupÃ¨re tous les itemsâ”‚
â”‚   â”œâ”€ CrÃ©e CKShare           â”‚
â”‚   â”œâ”€ Configure titre        â”‚
â”‚   â”œâ”€ Sauvegarde Core Data   â”‚â”€â”€â”
â”‚   â””â”€ Retourne CKShare       â”‚  â”‚
â”‚ }                           â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                 â”‚ 2. Sync CloudKit
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ CloudKit (Production)  â”‚
                    â”‚                        â”‚
                    â”‚ â”œâ”€ CrÃ©e zone partagÃ©e  â”‚
                    â”‚ â”œâ”€ Stocke les items    â”‚
                    â”‚ â””â”€ GÃ©nÃ¨re URL          â”‚
                    â”‚    https://icloud.com..â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ 3. URL prÃªte
                             â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ UICloudSharingController     â”‚
                â”‚                              â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                â”‚ â”‚ Ma Liste de Courses      â”‚ â”‚
                â”‚ â”‚ [Partager le lien...]     â”‚ â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ 4. Utilisateur choisit Messages
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ iMessage        â”‚
                  â”‚                 â”‚
                  â”‚ ğŸ”µ Lien crÃ©Ã©!   â”‚
                  â”‚ [Envoyer]       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: Acceptation du partage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur B â”‚
â”‚   (iPad)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1. ReÃ§oit iMessage
        â”‚ 2. Clique sur lien ğŸ”µ
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ iOS                         â”‚
â”‚ "Ouvrir dans MyShoppingList?"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 3. Oui
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AppDelegate                 â”‚
â”‚                             â”‚
â”‚ func userDidAcceptCloudKit  â”‚
â”‚ ShareWith(metadata) {       â”‚
â”‚   container.accept          â”‚
â”‚   ShareInvitations(...)     â”‚â”€â”€â”
â”‚ }                           â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                 â”‚ 4. TÃ©lÃ©charge donnÃ©es
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ CloudKit               â”‚
                    â”‚                        â”‚
                    â”‚ â””â”€ TÃ©lÃ©charge items:   â”‚
                    â”‚    â”œâ”€ Pommes           â”‚
                    â”‚    â”œâ”€ Bananes          â”‚
                    â”‚    â””â”€ Oranges          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ 5. IntÃ¨gre dans Core Data
                             â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Core Data (Utilisateur B)    â”‚
                â”‚                              â”‚
                â”‚ âœ… Pommes                    â”‚
                â”‚ âœ… Bananes                   â”‚
                â”‚ âœ… Oranges                   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 3: Synchronisation continue

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur A â”‚                              â”‚ Utilisateur B â”‚
â”‚   (iPhone)    â”‚                              â”‚   (iPad)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                              â”‚
        â”‚ 1. Ajoute "Lait"                             â”‚
        â–¼                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚ Core Data (A)   â”‚                                   â”‚
â”‚ + Lait          â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
         â”‚ 2. Sauvegarde                               â”‚
         â–¼                                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚ CloudKit (Production)   â”‚                           â”‚
â”‚ ReÃ§oit "Lait"           â”‚                           â”‚
â”‚ Zone partagÃ©e mise Ã     â”‚                           â”‚
â”‚ jour                    â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
         â”‚ 3. Notification push                        â”‚
         â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–º    â”‚
         â”‚                                             â–¼
         â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                    â”‚ Core Data (B)   â”‚
         â”‚                                    â”‚ TÃ©lÃ©charge      â”‚
         â”‚                                    â”‚ + Lait âœ…       â”‚
         â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                             â”‚
         â”‚                                             â–¼
         â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                    â”‚ Interface (B)   â”‚
         â”‚                                    â”‚ "Lait" apparaÃ®t â”‚
         â”‚â—„â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚ automatiquement â”‚
         â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 4. Si B modifie "Lait" â†’ "Lait Bio"
         â”‚    Le mÃªme processus se rÃ©pÃ¨te
         â”‚    dans l'autre sens!
         â”‚
```

---

## ğŸ“Š ENVIRONNEMENTS CLOUDKIT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CloudKit Environments                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     DEVELOPMENT       â”‚  â”‚      PRODUCTION       â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                       â”‚  â”‚                       â”‚  â”‚
â”‚  â”‚ ğŸ—ï¸  Phase de tests    â”‚  â”‚ ğŸš€ App en production  â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚                       â”‚  â”‚
â”‚  â”‚ UtilisÃ© par:          â”‚  â”‚ UtilisÃ© par:          â”‚  â”‚
â”‚  â”‚ â€¢ Xcode (Debug)       â”‚  â”‚ â€¢ TestFlight          â”‚  â”‚
â”‚  â”‚ â€¢ Simulateur          â”‚  â”‚ â€¢ App Store           â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚                       â”‚  â”‚
â”‚  â”‚ DonnÃ©es:              â”‚  â”‚ DonnÃ©es:              â”‚  â”‚
â”‚  â”‚ â€¢ IsolÃ©es             â”‚  â”‚ â€¢ Production rÃ©elle   â”‚  â”‚
â”‚  â”‚ â€¢ Modifiables         â”‚  â”‚ â€¢ Utilisateurs rÃ©els  â”‚  â”‚
â”‚  â”‚ â€¢ Supprimables        â”‚  â”‚                       â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚                       â”‚  â”‚
â”‚  â”‚ Schema:               â”‚  â”‚ Schema:               â”‚  â”‚
â”‚  â”‚ â€¢ âœ… Modifiable       â”‚  â”‚ â€¢ âš ï¸  NON modifiable  â”‚  â”‚
â”‚  â”‚ â€¢ âœ… RÃ©initialisable  â”‚  â”‚ â€¢ âš ï¸  VersionnÃ©       â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚                          â–²                â”‚
â”‚             â”‚                          â”‚                â”‚
â”‚             â”‚   [Deploy to Production] â”‚                â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                         â”‚
â”‚  âš ï¸  IMPORTANT:                                          â”‚
â”‚  Le schÃ©ma DOIT Ãªtre dÃ©ployÃ© de Development vers       â”‚
â”‚  Production pour que TestFlight fonctionne!            â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ OÃ™ EST LE PROBLÃˆME?

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   Votre situation ACTUELLE              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
     
     Development               Production
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  âœ… OK   â”‚             â”‚  âŒ VIDE â”‚
     â”‚          â”‚    â•±â•±â•±â•±â•±    â”‚          â”‚
     â”‚ Schema   â”‚             â”‚ Pas de   â”‚
     â”‚ Records  â”‚             â”‚ schema   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                        â–²
          â”‚                        â”‚
       Xcode                  TestFlight
       fonctionne          âŒ NE FONCTIONNE PAS
       
       
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   Ce qu'il faut faire                   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
     
     Development               Production
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  âœ… OK   â”‚â•â•â•â•â•â•â•â•â•â•â•â–º â”‚  âœ… OK   â”‚
     â”‚          â”‚   DEPLOY    â”‚          â”‚
     â”‚ Schema   â”‚   â•â•â•â•â•â•â•â–º  â”‚ Schema   â”‚
     â”‚ Records  â”‚             â”‚ Records  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                        â–²
          â”‚                        â”‚
       Xcode                  TestFlight
       âœ… fonctionne         âœ… FONCTIONNE!
```

---

## ğŸš€ ACTION Ã€ PRENDRE MAINTENANT

1. **Ouvrez** https://icloud.developer.apple.com/
2. **SÃ©lectionnez** iCloud.com.MyShoppingList
3. **Allez dans** Schema â†’ Development
4. **CLIQUEZ** sur "Deploy to Production..."
5. **Confirmez**
6. **Attendez** 2-5 minutes
7. **Testez** dans TestFlight
8. **Ã‡a marche!** âœ…

---

**VoilÃ ! Le mystÃ¨re est rÃ©solu! ğŸ‰**
